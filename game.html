<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>
    const Hero = {
        name: 'MJay',
        hitPoints: 25,
        armorClass: 12,
        attackBonus: 5,
        magicSlots: {
            name: '2 - –í–æ–ª—à–µ–±–Ω–∞—è —Å—Ç—Ä–µ–ª–∞',
            quantity: 2
        },
        getStatus: function () {
            return console.log(`\`‚öîÔ∏èpowerful MJay : ${Hero.hitPoints} HP`)
        },
        changeHP: function (hp) {
            if (this.hitPoints > 0) {
                this.hitPoints -= hp;
                if (this.hitPoints < 0) {
                    this.hitPoints = 0;
                }
                console.log(`üí• –£—Ä–æ–Ω: ${hp}`);
            } else {
                console.log(`üíÄ MJay —É–∂–µ –º–µ—Ä—Ç–≤.`);
            }
        },
        getMagicMissileDamage: function () {
            return Dice.d4() + Dice.d4() + Dice.d4() + 3
        }
    };
    const Enemy = {
        name: 'MaZaHaKeR',
        hitPoints: 30,
        armorClass: 15,
        attackBonus: 4,
        getStatus: function () {
            return console.log(`imperative MaZaHaKeR : ${Enemy.hitPoints} HP`)
        },
        changeHP: function (hp) {
            if (this.hitPoints > 0) {
                this.hitPoints -= hp;
                if (this.hitPoints < 0) {
                    this.hitPoints = 0;
                }
                console.log(`üí• –£—Ä–æ–Ω: ${hp}`);
            } else {
                console.log(`üíÄ MaZaHaKeR —É–∂–µ –º–µ—Ä—Ç–≤.`);
            }
        }
    };

    const Dice = {
        randomInt: (min, max) => {
            return Math.floor(Math.random() * (max - min + 1)) + min
        },
        d20: function () {
            return this.randomInt(1, 20)
        },
        d6: function () {
            return this.randomInt(1, 6)
        },
        d4: function () {
            return this.randomInt(1, 4)
        }
    };

    const gameplayMJay = () => {
        const resultHeroAttack = Dice.d20() + Hero.attackBonus
        console.log(`–ü–æ–ø—ã—Ç–∫–∞ –∞—Ç–∞–∫–∏  MJay —Ä–∞–≤–Ω–∞ ${resultHeroAttack}`)

        if (resultHeroAttack > Enemy.armorClass) {
            let damageHero = Dice.d6() + Dice.d6()
            Enemy.changeHP(damageHero)
            Enemy.getStatus()
            if (Enemy.hitPoints <= 0) {
                console.log(`üèÜ MJay –ø–æ–±–µ–¥–∏–ª`)
                return true
            }
        } else {
            console.log(`MJay –Ω–µ –ø–æ–ø–∞–ª ‚ùå –ø–æ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫—É`)
        }
        return true
    }

    const gameplayMaZaHaKeR = () => {
        if (Enemy.hitPoints !== 0) {
            const resultEnemyAttack = Dice.d20() + Enemy.attackBonus
            console.log(`–ü–æ–ø—ã—Ç–∫–∞ –∞—Ç–∞–∫–∏ MaZaHaKeR —Ä–∞–≤–Ω–∞ ${resultEnemyAttack}`)

            if (resultEnemyAttack > Hero.armorClass) {
                let damageEnemy = Dice.d6()
                Hero.changeHP(damageEnemy)
                Hero.getStatus()
            }
            if (Hero.hitPoints <= 0) {
                console.log(`üèÜMaZaHaKeR –ø–æ–±–µ–¥–∏–ª`)
                return true
            }
        } else {
            console.log(`MaZaHaKeR –Ω–µ ‚ùå –ø–æ–ø–∞–ª –ø–æ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫—É`)
        }
        return false
    }

    let validChoices = ['1', '2', '3', '4'];

    const bardMessages = [
        "–°–ª—É—à–∞–π, –≥–µ—Ä–æ–π, –ø—É—Ç—å —Ç–≤–æ–π —Ç—Ä—É–¥–µ–Ω, –Ω–æ –≤–ø–µ—Ä–µ–¥–∏ ‚Äî —Å–ª–∞–≤–∞ –∏ –±–æ–≥–∞—Ç—Å—Ç–≤–æ!",
        "–í–µ—Ä—å –≤ —Å–µ–±—è, –≤–µ–¥—å –¥–∞–∂–µ —Å–∞–º—ã–µ —Ç–µ–º–Ω—ã–µ –Ω–æ—á–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è —Ä–∞—Å—Å–≤–µ—Ç–æ–º!",
        "–ú–∏—Ä –ø–æ–ª–æ–Ω —Ç–∞–π–Ω, –∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥—É —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è —á—É–¥–µ—Å–∞ –∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏.",
        "–ó–Ω–∞–µ—à—å –ª–∏ —Ç—ã, —á—Ç–æ –ª–µ—Å–∞ –≤ —ç—Ç–æ–º –∫—Ä–∞—é –ø–æ–ª–Ω—ã –∑–∞–±—ã—Ç—ã—Ö –¥—Ä–µ–≤–Ω–æ—Å—Ç–µ–π?",
        "–û, —è —á—É–≤—Å—Ç–≤—É—é, –∫–∞–∫ —Ç—Ä–æ–Ω—É–ª —Ç–µ–±—è –º–æ–π —Å—Ç–∏—Ö! –ò–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ç–≤–æ–∏ —à–ª–µ–º –∏ –¥–æ—Å–ø–µ—Ö–∏ —Ç–∞–∫ –±–ª–µ—Å—Ç—è—Ç?",
        "–ì–µ—Ä–æ–π, —Ç—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –≤–∏–¥–µ–ª —á—Ç–æ-—Ç–æ –±–æ–ª–µ–µ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–µ, —á–µ–º —Ç–≤–æ—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–µ–Ω—å?",
        "–í–ø–µ—Ä–µ–¥–∏ —Ç–µ–±—è –∂–¥–µ—Ç –≤–µ–ª–∏–∫–∞—è –±–∏—Ç–≤–∞, –Ω–æ –ø–æ–º–Ω–∏: –¥–∞–∂–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –Ω–∞ –æ—Ç–¥—ã—Ö.",
        "–Ø –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—é, —á—Ç–æ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —Ç—ã –Ω–∞–π–¥–µ—à—å —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å... —Ü–µ–ª—ã–π —Å—É–Ω–¥—É–∫ –∑–æ–ª–æ—Ç–∞!",
        "–°–∏–ª–∞ ‚Äî –Ω–µ –≤—Å–µ–≥–¥–∞ –∫–ª—é—á –∫ –ø–æ–±–µ–¥–µ. –ò–Ω–æ–≥–¥–∞ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ —Ä–∞–∑—É–º –≤–∞–∂–Ω–µ–µ.",
        "–ö–∞–∂–¥—ã–π —à–∞–≥ –Ω–∞ –ø—É—Ç–∏ –∫ –≤–µ–ª–∏–∫–æ–π —Ü–µ–ª–∏ ‚Äî —ç—Ç–æ —à–∞–≥ –∫ —Å–∞–º–æ–º—É —Å–µ–±–µ.",
        "–ù–µ —Å–¥–∞–≤–∞–π—Å—è, –≤–µ–¥—å —Ç—ã –Ω–∞–º–Ω–æ–≥–æ —Å–∏–ª—å–Ω–µ–µ, —á–µ–º —Ç—ã —Å–∞–º —Å–µ–±–µ –∫–∞–∂–µ—à—å—Å—è!",
        "–ö–∞–∂–¥–æ–µ –∏—Å–ø—ã—Ç–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç—å –ª—É—á—à–µ. –î–µ—Ä–∑–∞–π!"
    ];
    const getRandomBardMessage = () => {
        const randomMessage = Math.floor(Math.random() * bardMessages.length);
        return bardMessages[randomMessage];
    }

    while (true) {
        let userChoice = prompt(`–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –≥–µ—Ä–æ—è:\n1 - –ê—Ç–∞–∫–æ–≤–∞—Ç—å\n${Hero.magicSlots ? Hero.magicSlots.name : ''}\n3 - –°–ª—É—à–∞—Ç—å –±–∞—Ä–¥–∞\n4 - –£–±–µ–∂–∞—Ç—å\n\n–£–∫–∞–∂–∏ —Ü–∏—Ñ—Ä—É:`);
        if (userChoice === null) {
            break
        } else if (validChoices.includes(userChoice)) {
            let skipEnemyTurn = false;
            switch (userChoice) {
                case '1':
                    console.log('-----\n–•–æ–¥ –≥–µ—Ä–æ—è MJay\n-----');
                    gameplayMJay();
                    break;
                case '2':
                    console.log('-----\n–•–æ–¥ –≥–µ—Ä–æ—è MJay\n-----');
                    if (Hero.magicSlots.quantity > 0) {
                        Enemy.changeHP(Hero.getMagicMissileDamage());
                        console.log(`–ù–∞–Ω–µ—Å–µ–Ω–æ —É—Ä–æ–Ω–∞ ${Hero.getMagicMissileDamage()}`);
                        Enemy.getStatus();
                        Hero.magicSlots.quantity--;
                        if (Hero.magicSlots.quantity === 0) {
                            delete Hero.magicSlots;
                            console.log(`–£ –≥–µ—Ä–æ—è –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π`);
                        }
                    } else {
                        console.log(`–ó–∞–∫–ª–∏–Ω–∞–Ω–∏—è –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!`);
                    }
                    break;
                case '3':
                    console.log(`${getRandomBardMessage()}`);
                    skipEnemyTurn = true
                    break;
                case '4':

                    console.log('–ì–µ—Ä–æ–π —Ä–µ—à–∏–ª —Å–±–µ–∂–∞—Ç—å! üèÉ‚Äç‚ôÇÔ∏èüí®');
                    break
                default:
                    break;
            }
            if (!skipEnemyTurn) {
                console.log('-----\n–•–æ–¥ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ MaZaHaKeR\n-----');
                if (gameplayMaZaHaKeR()) break;
            }


            console.log('================================');
        } else {
            console.log(' –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥')
        }
    }

</script>
</body>
</html>